/**\n * ✅ ARCHIVO CORREGIDO: src/lib/openai-init.ts\n * \n * Este archivo reemplaza la inicialización actual de OpenAI con validación explícita.\n * Usar en lugar de: src/lib/openai.ts\n * \n * CAMBIOS:\n * - Validación explícita de API key\n * - Error claro si falta configuración\n * - No usa placeholder\n * - Manejo diferente de dev vs prod\n */\n\nimport { OpenAI } from 'openai';\n\n/**\n * Inicializa OpenAI client con validación de configuración\n * @returns OpenAI instance o null si falta configuración\n * @throws Error en producción si falta API key\n */\nexport function initializeOpenAI(): OpenAI | null {\n  const apiKey = process.env.EXPO_PUBLIC_OPENAI_API_KEY;\n\n  // Validación 1: API key no existe\n  if (!apiKey) {\n    const errorMsg =\n      '[KONTIFY] CRITICAL ERROR: EXPO_PUBLIC_OPENAI_API_KEY environment variable is not set';\n    console.error(errorMsg);\n\n    if (__DEV__) {\n      // En desarrollo: warning\n      console.warn(\n        '⚠️  WARNING: AI Chat features will not work until you configure EXPO_PUBLIC_OPENAI_API_KEY in .env.local'\n      );\n      console.info(\n        'To fix: Add EXPO_PUBLIC_OPENAI_API_KEY=sk-proj-... to .env.local and restart the server'\n      );\n      return null; // Return null, UI components should handle gracefully\n    } else {\n      // En producción: error crítico\n      throw new Error(errorMsg);\n    }\n  }\n\n  // Validación 2: API key es el placeholder\n  if (apiKey === 'placeholder-key-for-build') {\n    const errorMsg =\n      '[KONTIFY] CRITICAL ERROR: Placeholder API key detected in ' +\n      (__DEV__ ? 'development' : 'PRODUCTION') +\n      '. This will cause AI features to fail.';\n    console.error(errorMsg);\n\n    if (!__DEV__) {\n      throw new Error(errorMsg);\n    }\n    return null;\n  }\n\n  // Validación 3: API key tiene formato mínimo válido\n  if (!apiKey.startsWith('sk-')) {\n    const errorMsg = `[KONTIFY] WARNING: API key does not start with 'sk-'. Expected OpenAI API key format.`;\n    console.warn(errorMsg);\n  }\n\n  try {\n    return new OpenAI({\n      apiKey,\n      // Configuración adicional\n      defaultHeaders: {\n        'User-Agent': 'Kontify-App/1.0',\n      },\n    });\n  } catch (error) {\n    console.error('[KONTIFY] Failed to initialize OpenAI client:', error);\n    if (!__DEV__) {\n      throw error;\n    }\n    return null;\n  }\n}\n\n/**\n * OpenAI client instance\n * Validado al startup, puede ser null si no está configurado\n */\nexport const openai = initializeOpenAI();\n\n/**\n * Validador: verifica si OpenAI está disponible antes de usar\n */\nexport function isOpenAIAvailable(): boolean {\n  return openai !== null && openai !== undefined;\n}\n\n/**\n * Helper para componentes que usan IA\n * Retorna error descriptivo si IA no está disponible\n */\nexport function getOpenAIError(): string | null {\n  if (isOpenAIAvailable()) {\n    return null;\n  }\n\n  if (__DEV__) {\n    return 'AI features are disabled. Configure EXPO_PUBLIC_OPENAI_API_KEY in .env.local to enable them.';\n  } else {\n    return 'AI features are temporarily unavailable. Please try again later.';\n  }\n}\n"
<br>